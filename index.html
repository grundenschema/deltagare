<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Schema ‚Äì Deltagare & Coacher</title>

<style>
:root{
  --bg:#fafafa;
  --card-bg:#fff;
  --border:#ddd;
  --shadow:0 3px 10px rgba(0,0,0,.06);
  --radius:14px;
  --muted:#555;
  --band:#9ecbff;
  --header-bg:#f5f7fa;
  --chip-bg:#f8fafc;
  --chip-border:#cfd8e3;
  --chip-active:#3b82f6;
  --chip-text:#1f2937;
}

/* Reset */
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  background:var(--bg);
  color:#222;
  max-width:1800px;
  margin:0 auto;
  padding:16px;
}

/* Header */
header{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:4px;margin-bottom:12px;cursor:pointer;
}
header img{height:60px;width:auto;}
#clock{font-weight:600;color:#333;font-size:1.1rem;letter-spacing:.5px}

/* Toolbar */
.toolbar{
  display:flex;flex-direction:column;gap:10px;align-items:center;justify-content:center;
  margin:12px 0 16px;
}
.toolbar-row{
  display:flex;flex-wrap:wrap;gap:10px;justify-content:center;align-items:center;
}
button,select{
  font-size:1rem;padding:10px 16px;border-radius:12px;border:1px solid #cfd8e3;background:#fff;cursor:pointer;transition:.15s background,.15s transform;
}
button:hover{background:#eef2f7}
button:active{transform:translateY(1px)}
select{min-width:220px;background:#fff}
#viewTitle{text-align:center;margin:10px 0 8px;font-weight:700;}

/* Cards */
.cards{display:flex;flex-direction:column;gap:10px;max-width:1100px;margin:0 auto;}
.card{
  position:relative;background:var(--card-bg);border:1px solid var(--border);
  border-radius:var(--radius);padding:12px 14px;box-shadow:var(--shadow);
}
.card::before{
  content:"";position:absolute;left:0;top:0;bottom:0;width:6px;background:var(--band,#9ecbff);
  border-top-left-radius:var(--radius);border-bottom-left-radius:var(--radius);
}
.card h3{margin:0 0 6px;font-size:1.05rem}
.card .row{font-size:.95rem;color:#222}

/* Veckoschema (liggande) */
#blockContainer{display:none;margin-top:6px;}
.block-header{
  display:grid;grid-template-columns:80px repeat(5,1fr);font-weight:800;font-size:.92rem;background:var(--header-bg);
  border-radius:10px 10px 0 0;text-transform:capitalize;
}
.block-header div{ text-align:center; padding:8px 0; }
.block-grid{ display:grid; grid-template-columns:80px repeat(5,1fr); background:transparent; }
.block-time{ font-size:.86rem; padding:4px 6px; text-align:right; color:#2b2b2b; }
.block-cell{ position:relative; min-height:28px; background:transparent; border:none; }
.block{
  position:absolute; left:2px; right:2px; top:2px;
  border-radius:10px; padding:6px 8px; line-height:1.25;
  font-size:.82rem; color:#111; box-shadow:var(--shadow);
  border:1px solid rgba(0,0,0,.15);
  word-break:break-word; overflow:hidden; -webkit-print-color-adjust:exact; print-color-adjust:exact;
}
.block .title{font-weight:700}

/* J√§mf√∂relse ‚Äì grid bredvid varandra (max 4) */
.compare-wrap{
  display:grid;
  gap:16px;
  grid-template-columns: repeat(auto-fit, minmax(360px, 1fr));
}
.compare-item{
  background:#fff;border:1px solid var(--border);border-radius:14px;padding:8px;box-shadow:var(--shadow);
}
.compare-item h3{margin:6px 0 10px;text-align:center;font-size:1.0rem}

/* Paneler */
.helper-panels{ max-width:1200px; margin:0 auto }
.panel{
  display:none;background:#fff;border:1px solid #cfd8e3;border-radius:14px;box-shadow:0 4px 14px rgba(0,0,0,.12);
  padding:16px;margin:14px auto;
}
.panel h2{margin:4px 0 10px;font-size:1.2rem}

/* J√§mf√∂r ‚Äì chips */
.chip-group{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
.chip-title{ font-weight:700; margin:10px 0 6px; }
.chip{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  background:#fff; border:1px solid var(--chip-border); color:var(--chip-text);
  border-radius:999px; padding:8px 14px; cursor:pointer; user-select:none;
  transition: background .15s, border-color .15s, color .15s;
  font-size:.95rem; font-weight:500;
}
.chip input{display:none;}
.chip.active{ background:var(--chip-active); border-color:var(--chip-active); color:#fff; }

/* Dropdown ‚ÄúSchemal√§ggning‚Äù */
.dropdown{ position:relative; display:inline-block; }
.dropdown-content{
  display:none; position:absolute; background:#fff; box-shadow:0 6px 18px rgba(0,0,0,.15);
  border:1px solid #e5e7eb; border-radius:12px; min-width:220px; z-index:10; overflow:hidden;
}
.dropdown-content button{
  width:100%; border:none; text-align:left; background:#fff; border-radius:0; padding:10px 14px;
}
.dropdown-content button:hover{ background:#f5f7fa; }
.dropdown.show .dropdown-content{ display:block; }

/* Print */
.print-visible{ display:block !important; }
@media print{
  body{ background:#fff; color:#000; font-size:9pt; margin:0; }
  header, .toolbar, .helper-panels, #nowContainer{ display:none !important; }
  #schemaContainer, #blockContainer{ display:none !important; }
  .compare-wrap{ grid-template-columns: repeat(2, 1fr); }
  .compare-item{ break-inside:avoid; page-break-inside:avoid; }
  @page{ size:A4 landscape; margin:6mm; }

  /* Denna M√ÖSTE ligga sist f√∂r att utskriften inte ska bli tom */
  .print-visible{ display:block !important; }
}

/* Responsiv */
@media (max-width:760px){
  body{padding:8px}
  .toolbar-row{gap:8px}
  button,select{width:95%;font-size:1.05rem}
}
</style>
</head>
<body>
<header title="Klicka f√∂r start (P√•g√•r nu)">
  <img src="https://cdn.prod.website-files.com/63e24702f042c50ffc91818b/646239316cf71bde35bcc2b4_grunden-DV-logo%20copy.png" alt="Grunden DV logo">
  <div id="clock"></div>
</header>

<!-- Knappar i √∂nskad ordning -->
<div class="toolbar">
  <div class="toolbar-row">
    <button id="btnParticipant">Deltagarschema</button>
    <button id="btnCoach">Coachschema</button>
    <div class="dropdown" id="scheduleDropdown">
      <button id="btnSchedule">üìÖ Schemal√§ggning ‚ñº</button>
      <div class="dropdown-content">
        <button id="btnCompare">üîç J√§mf√∂r scheman</button>
        <button id="btnSick">ü©∫ Hitta ers√§ttare</button>
      </div>
    </div>
  </div>

  <div class="toolbar-row">
    <button id="btnCards">Dagens schema</button>
    <button id="btnBlocks">Veckoschema</button>
    <button id="btnNow">P√•g√•r nu</button>
  </div>

  <div class="toolbar-row" style="gap:8px;margin-top:4px;">
    <select id="nameSelect"><option value="">-- V√§lj deltagare --</option></select>
    <select id="coachSelect" style="display:none"><option value="">-- V√§lj coach --</option></select>
  </div>
</div>

<h2 id="viewTitle"></h2>

<!-- Ytor -->
<div id="schemaContainer" class="print-scope" style="display:none;"></div>
<div id="nowContainer" style="display:none;"></div>

<div id="blockContainer" class="print-scope" style="display:none;">
  <div class="block-header" id="blockHeader"></div>
  <div class="block-grid" id="blockGrid"></div>
  <div style="text-align:center;margin-top:10px;">
    <button id="btnPrint" style="display:none;">üñ®Ô∏è Skriv ut</button>
  </div>
</div>

<!-- Paneler (J√§mf√∂relse och Ers√§ttare) -->
<div class="helper-panels">
  <div id="comparePanel" class="panel">
    <h2>üîç J√§mf√∂r scheman</h2>
    <div class="chip-title">Coacher</div>
    <div id="coachListCompare" class="chip-group"></div>
    <div class="chip-title">Deltagare</div>
    <div id="participantListCompare" class="chip-group"></div>
    <div style="text-align:center; margin-top:12px;">
      <button id="btnShowCompare">Visa valda scheman</button>
    </div>
  </div>

  <div id="sickPanel" class="panel">
    <h2>ü©∫ Hitta ers√§ttare</h2>
    <select id="sickCoachSelect"><option value="">-- V√§lj sjuk coach --</option></select>
    <div style="margin-top:8px;">
      <label><input type="checkbox" id="chkFullWeek" checked> Visa hela veckan</label>
    </div>
    <div id="sickResult" style="margin-top:10px;"></div>
  </div>
</div>

<script>
/* =========================
   DATA & KONFIG
========================= */
const url="https://script.google.com/macros/s/AKfycbyrif6NVB3DPkmSam6kOX_M3xcXcrkBGFKVznDV2PRrUxIrN0q9c16VCgNQ7fFtrwBS/exec";

/* Emoji & f√§rg per aktivitet */
const aktivitetFarger={...}; // (inneh√•llet √§r exakt som i din originalkod)
...
// hela din JavaScript-kod √§r of√∂r√§ndrad h√§r
...
</script>
</body>
</html>
